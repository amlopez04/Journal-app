<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="mb-0"><%= @category.name %></h1>
  <div class="btn-group" role="group">
    <%= link_to "New Entry", new_category_entry_path(@category), class: "btn btn-success" %>
    <% if @category.user == current_user %>
      <%= link_to "Edit Category", edit_category_path(@category), class: "btn btn-warning" %>
      <%= link_to "Delete Category", category_path(@category), 
          data: { turbo_method: :delete, turbo_confirm: "Are you sure? This will delete all entries in this category!" },
          class: "btn btn-danger" %>
    <% end %>
  </div>
</div>

<div class="mb-3">
  <%= link_to "â† Back to Categories", new_category_url, class: "text-decoration-none" %>
</div>

<h2 class="mb-4">Entries 
  <span class="badge bg-secondary"><%= @category.entries.count %></span>
</h2>

<% if @category.entries.any? %>
  <div class="list-group">
    <% @category.entries.order(created_at: :desc).each do |entry| %>
      <%= link_to category_entry_path(@category, entry), class: "list-group-item list-group-item-action" do %>
        <div class="d-flex w-100 justify-content-between">
          <h5 class="mb-1"><%= entry.title %></h5>
          <small class="text-muted"><%= entry.created_at.strftime("%B %d, %Y") %></small>
        </div>
        <% if entry.content.present? %>
          <p class="mb-1 text-muted"><%= truncate(entry.content, length: 100) %></p>
        <% end %>
      <% end %>
    <% end %>
  </div>
<% else %>
  <div class="card text-center py-5" style="border-style: dashed;">
    <div class="card-body">
      <p class="text-muted mb-3">No entries yet.</p>
      <%= link_to "Create your first entry", new_category_entry_path(@category), class: "btn btn-success" %>
    </div>
  </div>
<% end %>

